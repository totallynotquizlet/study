<!DOCTYPE html>
<html lang="en"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Totally Not Quizlet</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>

    <div id="app-container" class="max-w-4xl mx-auto p-4 md:p-8 min-h-screen relative flex flex-col">
        
        <button id="settings-button" class="absolute top-6 left-6 md:top-8 md:left-10 z-50 p-2 rounded-full transition-all duration-300 hidden">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.096 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
        </button>

        <button id="theme-toggle-button" class="absolute top-6 right-6 md:top-8 md:right-10 z-50 p-2 rounded-full transition-all duration-300">
            <span id="theme-icon-sun" class="text-3xl" style="line-height: 1;">â˜¼</span>
            <svg id="theme-icon-moon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
        </button>

        <img src="favicon.png" alt="Site Logo" id="header-logo" class="absolute top-6 md:top-8 z-50">
        
        <header class="mb-6 pt-12">
            <h1 id="header-title" class="text-3xl text-center mb-6">Totally Not Quizlet</h1>
            <nav class="flex justify-center p-2 space-x-1 md:space-x-2">
                <button data-mode="flashcards" class="nav-button flex-1 rounded-md">Flashcards</button>
                <button data-mode="learn" class="nav-button flex-1 rounded-md">Learn</button>
                <button data-mode="match" class="nav-button flex-1 rounded-md">Match</button> 
                <button data-mode="type" class="nav-button flex-1 rounded-md">Type</button>
                <button data-mode="create" class="nav-button flex-1 rounded-md">Create</button>
                <button id="share-deck-button" class="flex-1 rounded-md hidden">Share Deck</button>
            </nav>
        </header>

        <main id="main-content" class="flex-grow">

            <div id="empty-deck-view" class="app-view text-center p-8 md:p-12 rounded-lg">
                <h2 class="text-2xl font-semibold mb-4">Your deck is empty!</h2>
                <p class="mb-6">Please create a new deck to get started.</p>
                <button data-mode="create" class="nav-button main-action-button font-medium py-3 px-6 rounded-lg">
                    Create a Deck
                </button>
            </div>

            <div id="create-view" class="app-view">
                <div id="create-form-container" class="space-y-6">
                    <div>
                        <input type="text" id="deck-title-input" class="w-full" placeholder="Enter a title, like &quot;Biology - Chapter 4&quot;">
                        <label for="deck-title-input" class="create-label">TITLE</label>
                    </div>
                    <!-- MODIFIED: Wrapped toggles and new button in a flex container -->
                    <div class="flex justify-between items-center">
                        <div class="flex space-x-2">
                            <button id="toggle-manual-button" class="create-toggle-button active">
                                Manual Entry
                            </button>
                            <button id="toggle-paste-button" class="create-toggle-button">
                                Import from Text
                            </button>
                        </div>
                        <!-- NEW: Clear All Button -->
                        <button id="clear-create-button" class="danger-action-button text-sm px-4 py-2">
                            Clear All
                        </button>
                    </div>
                    <div id="manual-input-section" class="space-y-4">
                        <div id="card-editor-list" class="space-y-3">
                        </div>
                        <button id="add-card-button" class="w-full">
                            + ADD CARD
                        </button>
                    </div>
                    <div id="paste-input-section" class="hidden space-y-4">
                        <p id="create-example-guide" class="text-sm p-3 rounded-md">
                            Paste your terms and definitions here, separated by a comma. Put each new pair on a new line.
                            <br>
                            <strong>Example Format:</strong><br>
                            Capital of France, Paris<br>
                            2 + 2, 4
                        </p>
                        <textarea id="deck-input-area" class="w-full h-64 p-3 rounded-lg focus:outline-none" placeholder="Enter deck data here..."></textarea>
                    </div>
                    <button id="parse-deck-button" class="main-action-button mt-4 w-full font-medium py-3 px-6 rounded-lg">
                        Create Deck
                    </button>
                </div>
            </div>

            <div id="flashcards-view" class="app-view">
                <div class="perspective-container h-96">
                    <div id="flashcard-container" class="flashcard relative w-full h-full cursor-pointer rounded-2xl">
                        <!-- 
                            BUG FIX: Removed the 'relative' class from this line.
                            It was conflicting with the 'absolute' class needed for the 3D flip.
                        -->
                        <div id="flashcard-front" class="card-face absolute w-full h-full p-6 rounded-2xl flex items-center justify-center">
                            <button class="tts-button" title="Read text aloud">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707A1 1 0 0112 6.586v10.828a1 1 0 01-1.707.707L5.586 15z" />
                                </svg>
                            </button>
                            <p class="text-3xl font-medium text-center"></p>
                        </div>
                        <!-- 
                            BUG FIX: Removed the 'relative' class from this line.
                            It was conflicting with the 'absolute' class needed for the 3D flip.
                        -->
                        <div id="flashcard-back" class="card-face card-back absolute w-full h-full p-6 rounded-2xl flex items-center justify-center">
                            <button class="tts-button" title="Read text aloud">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707A1 1 0 0112 6.586v10.828a1 1 0 01-1.707.707L5.586 15z" />
                                </svg>
                            </button>
                            <p class="text-2xl font-medium text-center"></p>
                        </div>
                    </div>
                </div>
                <div id="flashcard-nav" class="flex justify-between items-center mt-6">
                    <button id="prev-card-button" class="py-2 px-5 rounded-lg font-medium">&larr;</button>
                    <div id="card-counter" class="font-medium">1 / 10</div>
                    <button id="next-card-button" class="py-2 px-5 rounded-lg font-medium">&rarr;</button>
                </div>
            </div>

            <div id="learn-view" class="app-view">
                <div id="learn-progress-container" class="progress-bar-container hidden mb-6">
                    <div id="learn-progress-bar" class="progress-bar"></div>
                </div>
                <div id="learn-mode-disabled" class="text-center p-8 md:p-12 rounded-lg hidden">
                    <h2 class="text-2xl font-semibold mb-4">Learn Mode Needs More Cards</h2>
                    <p>Learn mode requires at least 4 cards to generate quizzes. Please add more cards to your deck.</p>
                </div>
                <div id="learn-mode-quiz" class="hidden">
                    <div id="learn-question-box" class="p-6 rounded-2xl mb-6 min-h-[150px] flex items-center justify-center">
                        <p id="learn-term" class="text-3xl font-medium text-center"></p>
                    </div>
                    <div id="learn-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    </div>
                    <div id="learn-feedback-container" class="mt-6 flex gap-4 hidden">
                        <div id="learn-feedback" class="flex-grow p-4 rounded-lg text-center font-medium">
                            <span id="learn-feedback-message"></span>
                        </div>
                        <button id="learn-continue-button" class="continue-button hidden">Continue</button>
                    </div>
                </div>
                <div id="learn-complete-view" class="text-center p-8 md:p-12 rounded-lg hidden">
                    <h2 class="text-2xl font-semibold mb-4">You've mastered this round!</h2>
                    <p class="mb-8">You answered all questions correctly.</p>
                    <div class="flex flex-col md:flex-row gap-4 justify-center">
                        <button id="learn-restart-button" class="main-action-button font-medium py-3 px-6 rounded-lg">
                            Start Again
                        </button>
                        <button id="learn-switch-mode-button" class="secondary-action-button font-medium py-3 px-6 rounded-lg">
                            Switch to Match
                        </button>
                    </div>
                </div>
            </div>

            <div id="type-view" class="app-view">
                <div id="type-progress-container" class="progress-bar-container hidden mb-6">
                    <div id="type-progress-bar" class="progress-bar"></div>
                </div>
                <div id="type-mode-disabled" class="text-center p-8 md:p-12 rounded-lg hidden">
                    <h2 class="text-2xl font-semibold mb-4">Type Mode Needs Cards</h2>
                    <p>This mode requires at least 1 card in your deck. Please add more cards to get started.</p>
                </div>

                <div id="type-mode-quiz" class="hidden space-y-6">
                    <div id="type-question-box" class="p-6 rounded-2xl min-h-[150px] flex items-center justify-center">
                        <p id="type-question-term" class="text-3xl font-medium text-center"></p>
                    </div>

                    <form id="type-input-form">
                        <div id="type-input-wrapper" class="relative">
                            <input type="text" id="type-input-area" placeholder="Type the answer..." class="w-full text-lg p-4 pr-28 rounded-lg">
                            <button id="type-submit-button" type="submit" class="absolute right-2 top-2 bottom-2 main-action-button font-medium px-6 rounded-lg">
                                Enter
                            </button>
                        </div>
                    </form>

                    <div id="type-feedback-container" class="mt-4 flex gap-4 hidden">
                        <div id="type-feedback" class="flex-grow p-4 rounded-lg text-center font-medium">
                            <p id="type-feedback-message" class="text-lg"></p>
                            <p id="type-feedback-correct-answer" class="mt-2"></p>
                            <button id="type-override-wrong-button" class="type-override-button hidden">
                                I got it wrong
                            </button>
                            <button id="type-override-correct-button" class="type-override-button hidden">
                                I got it correct
                            </button>
                        </div>
                        <button id="type-continue-button" class="continue-button hidden">Continue</button>
                    </div>
                </div>

                <div id="type-complete-view" class="text-center p-8 md:p-12 rounded-lg hidden">
                    <h2 class="text-2xl font-semibold mb-4">You've mastered this round!</h2>
                    <p class="mb-8">You answered all questions correctly.</p>
                    <div class="flex flex-col md:flex-row gap-4 justify-center">
                        <button id="type-restart-button" class="main-action-button font-medium py-3 px-6 rounded-lg">
                            Start Again
                        </button>
                        <button id="type-switch-mode-button" class="secondary-action-button font-medium py-3 px-6 rounded-lg">
                            Switch to Flashcards
                        </button>
                    </div>
                </div>
            </div>

            <div id="match-view" class="app-view">
                <div id="match-mode-disabled" class="text-center p-8 md:p-12 rounded-lg hidden">
                    <h2 class="text-2xl font-semibold mb-4">Match Mode Needs More Cards</h2>
                    <p>This mode requires at least 2 cards in your deck. Please add more cards to get started.</p>
                </div>

                <div id="match-start-screen" class="text-center p-8 md:p-12 rounded-lg hidden">
                    <h2 class="text-2xl font-semibold mb-4">Match Game</h2>
                    <p class="mb-8">Find the matching terms and definitions as fast as you can!</p>
                    <button id="match-start-button" class="main-action-button font-medium py-3 px-6 rounded-lg">
                        Start Game
                    </button>
                </div>

                <div id="match-mode-game" class="hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold">Match the pairs!</h2>
                        <div class="text-right">
                            <div id="match-timer" class="text-2xl font-bold">0.0s</div>
                            <div id="match-best-time" class="text-sm">Best: --.-s</div>
                        </div>
                    </div>
                    <div id="match-game-area" class="grid grid-cols-2 gap-4">
                        <div id="match-terms-list" class="space-y-3">
                            </div>
                        <div id="match-defs-list" class="space-y-3">
                            </div>
                    </div>
                </div>

                <div id="match-complete-view" class="text-center p-8 md:p-12 rounded-lg hidden">
                    <h2 class="text-2xl font-semibold mb-4">You've matched them all!</h2>
                    <p class="mb-8">Great job! You've completed this set.</p>
                    <div class="flex flex-col md:flex-row gap-4 justify-center">
                        <button id="match-restart-button" class="main-action-button font-medium py-3 px-6 rounded-lg">
                            Play Again
                        </button>
                        <button data-mode="type" class="nav-button secondary-action-button font-medium py-3 px-6 rounded-lg">
                            Switch to Type
                        </button>
                    </div>
                </div>
            </div>

        </main>

        <footer class="text-center p-6 mt-8 border-t">
            <p class="mb-2">Created by someone</p>
            <div class="flex justify-center space-x-4">
                <button id="about-button" class="footer-link underline cursor-pointer">About</button>
                
                <a href="https://forms.gle/aorM6MFQvaTMf16j9" class="footer-link underline">
                    Bug Report
                </a>
                
                <a href="https://forms.gle/Z1xESserXb1NVVDv6" class="footer-link underline">
                    Feature Request
                </a>
            </div>
        </footer>
        
        <div id="toast-notification" class="fixed bottom-6 right-6 py-3 px-5 rounded-lg shadow-xl opacity-0 translate-y-4 transition-all duration-300 z-50">
            </div>

    </div>

    <!-- About Modal -->
    <div id="about-modal-overlay" class="fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0"></div>
        <div id="about-modal-content" class="relative w-full max-w-md p-6 md:p-8 rounded-2xl">
            <button id="about-modal-close" class="absolute top-4 right-5 text-3xl font-bold">&times;</button>
            <h2 class="text-2xl font-bold mb-4">About This Site</h2>
            <p>
                This study site was created to be an alternative to other options that bombard you 
                with ads or make you pay to use them. The site includes flashcards, multiple 
                choice questions, matching questions, and text questions with AI to intelligently help you memorize for school! With the 
                base64 URLs, you can share study sets you've created without having to create an 
                account and risk getting your personal information sold. Simply press the "Share 
                Deck" button in the top menu to instantly copy the link to your clipboard for fast 
                sharing. Your progress is stored locally in your browser and will not be deleted 
                unless you clear your history or site data. This site is still under works 
                and will contine to bring new features over time. Enjoy studying!
            </p>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal-overlay" class="fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0"></div>
        <div id="settings-modal-content" class="relative w-full max-w-md p-6 md:p-8 rounded-2xl space-y-6">
            <button id="settings-modal-close" class="absolute top-4 right-5 text-3xl font-bold">&times;</button>
            <h2 class="text-2xl font-bold mb-4">Study Set Settings</h2>
            
            <div>
                <label for="setting-deck-title" class="create-label">DECK TITLE</label>
                <input type="text" id="setting-deck-title" class="w-full" placeholder="Enter a title...">
            </div>
            <div>
                <label class="create-label">SHUFFLE CARDS</label>
                <button id="setting-toggle-shuffle" class="settings-toggle-button w-full">
                    Shuffle
                </button>
            </div>
            <div>
                <label class="create-label">START WITH</label>
                <button id="setting-toggle-start-with" class="settings-toggle-button w-full">
                    Term
                </button>
            </div>

            <div class="pt-4 border-t border-dashed border-[var(--color-border)]">
                <label class="create-label">EXPORT</label>
                <button id="copy-deck-button" class="secondary-action-button w-full">
                    Copy all terms and definitions
                </button>
            </div>
        </div>
    </div>

    <!-- NEW: Clear Confirmation Modal -->
    <div id="clear-confirm-modal-overlay" class="fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0"></div>
        <div id="clear-confirm-modal-content" class="relative w-full max-w-sm p-6 md:p-8 rounded-2xl">
            <h2 class="text-xl font-bold mb-4">Are you sure?</h2>
            <p class="mb-6">
                This will clear all terms, definitions, and the title from the create page. This action cannot be undone.
            </p>
            <div class="flex justify-end space-x-3">
                <button id="clear-cancel-button" class="secondary-action-button font-medium py-2 px-5 rounded-lg">
                    Cancel
                </button>
                <button id="clear-confirm-button" class="danger-action-button font-medium py-2 px-5 rounded-lg">
                    Clear All
                </button>
            </div>
        </div>
    </div>

    <!-- NEW: Unsaved Changes Modal -->
    <div id="unsaved-changes-modal-overlay" class="fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0"></div>
        <div id="unsaved-changes-modal-content" class="relative w-full max-w-sm p-6 md:p-8 rounded-2xl">
            <h2 class="text-xl font-bold mb-4">Unsaved Changes</h2>
            <p class="mb-6">
                You have unsaved changes. Do you want to save them before continuing?
            </p>
            <div class="flex flex-col space-y-3">
                <button id="unsaved-save-button" class="main-action-button font-medium py-3 px-5 rounded-lg">
                    Save & Continue
                </button>
                <button id="unsaved-discard-button" class="danger-action-button font-medium py-3 px-5 rounded-lg">
                    Continue without Saving
                </button>
                <button id="unsaved-cancel-button" class="secondary-action-button font-medium py-3 px-5 rounded-lg">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
